<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="A while back when grep’ing through the AOSP for package manager references, I noticed something weird; 12345678tstrazzere@spinach:~&#x2F;repo&#x2F;android$ grep -ir &quot;&#x2F;system&#x2F;bin&#x2F;pm&quot; *...packages&#x2F;exper">
<meta property="og:type" content="article">
<meta property="og:title" content="Ops, did I publish that in the AOSP?">
<meta property="og:url" content="https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/index.html">
<meta property="og:site_name" content="Strazzere">
<meta property="og:description" content="A while back when grep’ing through the AOSP for package manager references, I noticed something weird; 12345678tstrazzere@spinach:~&#x2F;repo&#x2F;android$ grep -ir &quot;&#x2F;system&#x2F;bin&#x2F;pm&quot; *...packages&#x2F;exper">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2012-03-22T21:55:27.000Z">
<meta property="article:modified_time" content="2024-06-18T21:20:59.094Z">
<meta property="article:author" content="Tim Strazzere">
<meta property="article:tag" content="android">
<meta property="article:tag" content="AOSP">
<meta property="article:tag" content="security">
<meta property="article:tag" content="droiddreamcleaner">
<meta property="article:tag" content="experimental">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@timstrazz">
    
    
      
        
          
            <link rel="shortcut icon" href="https://www.gravatar.com/avatar/6a4b43066d19111e850cb14b45eacf93?s=48">
          
        
      
      
        
          
            <link rel="icon" type="image/png" href="https://www.gravatar.com/avatar/6a4b43066d19111e850cb14b45eacf93?s=192" sizes="192x192">
          
        
      
      
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="https://www.gravatar.com/avatar/6a4b43066d19111e850cb14b45eacf93?s=180">
          
        
      
    
    <!-- title -->
    <title>Ops, did I publish that in the AOSP?</title>
    <!-- async scripts -->
    <!-- Google Analytics -->

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-166943540-1"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-166943540-1');
  </script>


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/true" title="Strazzere" type="application/atom+xml" />
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 7.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/strazzere">Projects</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2012/04/static-decryption-for-android-lena-bc/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2012/03/insomnidroid-crackme-solution/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&text=Ops, did I publish that in the AOSP?"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&title=Ops, did I publish that in the AOSP?"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&is_video=false&description=Ops, did I publish that in the AOSP?"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Ops, did I publish that in the AOSP?&body=Check out this article: https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&title=Ops, did I publish that in the AOSP?"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&title=Ops, did I publish that in the AOSP?"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&title=Ops, did I publish that in the AOSP?"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&title=Ops, did I publish that in the AOSP?"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&name=Ops, did I publish that in the AOSP?&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&t=Ops, did I publish that in the AOSP?"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Ops, did I publish that in the AOSP?
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">Tim Strazzere</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2012-03-22T21:55:27.000Z" class="dt-published" itemprop="datePublished">2012-03-22</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/android/">android</a> › <a class="category-link" href="/categories/android/coding/">coding</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/AOSP/" rel="tag">AOSP</a>, <a class="p-category" href="/tags/android/" rel="tag">android</a>, <a class="p-category" href="/tags/droiddreamcleaner/" rel="tag">droiddreamcleaner</a>, <a class="p-category" href="/tags/experimental/" rel="tag">experimental</a>, <a class="p-category" href="/tags/security/" rel="tag">security</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p>A while back when grep’ing through the AOSP for package manager references, I noticed something weird;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tstrazzere@spinach:~/repo/android$ grep -ir &quot;/system/bin/pm&quot; *</span><br><span class="line">...</span><br><span class="line">packages/experimental/droiddreamclean/droiddreamclean.c:  fp = popen(&quot;/system/bin/pm list packages&quot;, &quot;r&quot;);</span><br><span class="line">packages/experimental/droiddreamclean/droiddreamclean.c:    printf(&quot;failed to run /system/bin/pm list packages. not removing apps.\n&quot;);</span><br><span class="line">packages/experimental/droiddreamclean/droiddreamclean.c:    system(&quot;/system/bin/pm uninstall com.android.providers.downloadsmanager&quot;);</span><br><span class="line">packages/experimental/droiddreamclean/droiddreamclean.c:    system(&quot;/system/bin/pm uninstall com.android.providers.ammanage&quot;);</span><br><span class="line">Binary file packages/experimental/AndroidVendorSecurityTool/assets/droiddreamcleanall matches</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>What’s this directory? What is contained in it? Let’s look at the readme;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">tstrazzere@spinach:~/repo/android/packages/experimental$ ls -lhGg</span><br><span class="line">total 60K</span><br><span class="line">-rw-rw-r-- 1  143 2011-12-13 15:23 Android.mk</span><br><span class="line">drwxrwxr-x 5 4.0K 2011-12-13 15:23 AndroidVendorSecurityTool</span><br><span class="line">drwxrwxr-x 4 4.0K 2011-12-13 15:23 BugReportSender</span><br><span class="line">drwxrwxr-x 4 4.0K 2011-12-13 15:23 CameraPreviewTest</span><br><span class="line">-rw-rw-r-- 1 2.2K 2011-12-13 15:23 CleanSpec.mk</span><br><span class="line">drwxrwxr-x 5 4.0K 2011-12-13 15:23 DreamTheater</span><br><span class="line">drwxrwxr-x 2 4.0K 2011-12-13 15:23 droiddreamclean</span><br><span class="line">drwxrwxr-x 4 4.0K 2011-12-13 15:23 ExampleImsFramework</span><br><span class="line">drwxrwxr-x 4 4.0K 2011-12-13 15:23 LoaderApp</span><br><span class="line">drwxrwxr-x 2 4.0K 2011-12-13 15:23 procstatlog</span><br><span class="line">-rw-rw-r-- 1  844 2011-12-13 15:23 README</span><br><span class="line">drwxrwxr-x 4 4.0K 2011-12-13 15:23 RpcPerformance</span><br><span class="line">drwxrwxr-x 4 4.0K 2011-12-13 15:23 StrictModeTest</span><br><span class="line">drwxrwxr-x 4 4.0K 2011-12-13 15:23 UiAutomation</span><br><span class="line">drwxrwxr-x 3 4.0K 2011-12-13 15:23 UiAutomationDemo</span><br><span class="line"> </span><br><span class="line">tstrazzere@spinach:~/repo/android/packages/experimental$ cat README</span><br><span class="line">The packages/experimental/ directory is for NON-SHIPPING code that is</span><br><span class="line">not included with any flavor of the device, the SDK, or any other kind</span><br><span class="line">of public release, but which might be useful for someone as a test</span><br><span class="line">harness, development tool, or general fun times.</span><br><span class="line"> </span><br><span class="line">&gt;&gt; Every package under this directory must have a README file &lt;&lt;</span><br><span class="line"> </span><br><span class="line">Official SDK development samples should NOT go here, they should go in</span><br><span class="line">development/samples/ instead.</span><br><span class="line"> </span><br><span class="line">Unlike the rest of the tree, code in experimental/ is NOT built by</span><br><span class="line">default, and may be arbitrarily broken.  Caveat user!  Individual</span><br><span class="line">packages must be built directly with &quot;mmm&quot; or equivalent:</span><br><span class="line"> </span><br><span class="line">   mmm packages/experimental/BugReportSender</span><br><span class="line"> </span><br><span class="line">Like a communal fridge, this directory will be cleaned periodically.</span><br><span class="line">Every major release, we intend to remove and archive any package that</span><br><span class="line">does not have an active owner and users.</span><br></pre></td></tr></table></figure>

<p>Ops! Did someone mean to publish this repo? It’s all a bunch of experimental and interesting code. Granted it’s a bit old now, but still very interesting to look at. Specifically there are what looks to be the precursor to fragments and ui testing automation, done and committed before the final work was committed to AOSP. There is also the DroidDreamCleaner utility which is interesting. While it was an fix for an old issue, it’s just interesting to see how Google coders handled the issue without having to reverse it. We can even see a “DreamThreater” application which looks like some work done to make an Android screen saver. Sadly not all this code can compile since it relies on some code which isn’t accessible to us and the released branches of AOSP. It seems this code may have been mistakenly committed to the public branch after the kernel.org mishaps, as it appears to have been made public after AOSP became available on Google’s own servers.</p>
<p>If you don’t have all of AOSP pulled, you can get it by just cloning the following repository;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://android.googlesource.com/platform/packages/experimental</span><br></pre></td></tr></table></figure>
<p>Again, nothing ground breaking - but definitely an interest repository of code to take a look at, if not to see how Google coders work on “internal” code which isn’t released but to see their comments and documentation that is sometimes stripped from AOSP :)</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a target="_blank" rel="noopener" href="https://github.com/strazzere">Projects</a></li>
        
      </ul>
    </div>

    
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&text=Ops, did I publish that in the AOSP?"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&title=Ops, did I publish that in the AOSP?"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&is_video=false&description=Ops, did I publish that in the AOSP?"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Ops, did I publish that in the AOSP?&body=Check out this article: https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&title=Ops, did I publish that in the AOSP?"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&title=Ops, did I publish that in the AOSP?"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&title=Ops, did I publish that in the AOSP?"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&title=Ops, did I publish that in the AOSP?"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&name=Ops, did I publish that in the AOSP?&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://strazzere.com/2012/03/ops-did-i-publish-that-in-the-aosp/&t=Ops, did I publish that in the AOSP?"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2008-2025
    Tim Strazzere
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/strazzere">Projects</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
