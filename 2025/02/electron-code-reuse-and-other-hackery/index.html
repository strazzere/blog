<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Electron and local environmentsAfter a few years of dealing with a rather large Electron application. I’ve found a few different ways to approach things – as with anyone dealing with large bohemoth co">
<meta property="og:type" content="article">
<meta property="og:title" content="Electron code reuse, and other hackery">
<meta property="og:url" content="https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/index.html">
<meta property="og:site_name" content="Strazzere">
<meta property="og:description" content="Electron and local environmentsAfter a few years of dealing with a rather large Electron application. I’ve found a few different ways to approach things – as with anyone dealing with large bohemoth co">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-02-06T18:34:57.000Z">
<meta property="article:modified_time" content="2025-02-06T20:16:02.091Z">
<meta property="article:author" content="Tim Strazzere">
<meta property="article:tag" content="typescript">
<meta property="article:tag" content="electron">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@timstrazz">
    
    
      
        
          
            <link rel="shortcut icon" href="https://www.gravatar.com/avatar/6a4b43066d19111e850cb14b45eacf93?s=48">
          
        
      
      
        
          
            <link rel="icon" type="image/png" href="https://www.gravatar.com/avatar/6a4b43066d19111e850cb14b45eacf93?s=192" sizes="192x192">
          
        
      
      
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="https://www.gravatar.com/avatar/6a4b43066d19111e850cb14b45eacf93?s=180">
          
        
      
    
    <!-- title -->
    <title>Electron code reuse, and other hackery</title>
    <!-- async scripts -->
    <!-- Google Analytics -->

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-166943540-1"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-166943540-1');
  </script>


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/true" title="Strazzere" type="application/atom+xml" />
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 7.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/strazzere">Projects</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" aria-label="Next post" href="/2024/08/adventures-in-mTLS-with-yubico-forward-looking-for-cac-integrations/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&text=Electron code reuse, and other hackery"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&title=Electron code reuse, and other hackery"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&is_video=false&description=Electron code reuse, and other hackery"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Electron code reuse, and other hackery&body=Check out this article: https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&title=Electron code reuse, and other hackery"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&title=Electron code reuse, and other hackery"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&title=Electron code reuse, and other hackery"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&title=Electron code reuse, and other hackery"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&name=Electron code reuse, and other hackery&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&t=Electron code reuse, and other hackery"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Electron-and-local-environments"><span class="toc-number">1.</span> <span class="toc-text">Electron and local environments</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#isPackaged"><span class="toc-number">1.1.</span> <span class="toc-text">isPackaged</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Are-we-in-electron-or-not"><span class="toc-number">1.2.</span> <span class="toc-text">Are we in electron or not?</span></a></li></ol></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Electron code reuse, and other hackery
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">Tim Strazzere</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2025-02-06T18:34:57.000Z" class="dt-published" itemprop="datePublished">2025-02-06</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/electron/">electron</a> › <a class="category-link" href="/categories/electron/typescript/">typescript</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/electron/" rel="tag">electron</a>, <a class="p-category" href="/tags/typescript/" rel="tag">typescript</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h1 id="Electron-and-local-environments"><a href="#Electron-and-local-environments" class="headerlink" title="Electron and local environments"></a>Electron and local environments</h1><p>After a few years of dealing with a rather large <a target="_blank" rel="noopener" href="https://www.electronjs.org/">Electron</a> application. I’ve found a few different ways to approach things – as with anyone dealing with large bohemoth codebases, it feels natural to carve it up and chunk out the code into more managable pieces. This leads us from having one large, insanely unplanned renderer, to having “nicer” (though not great) smaller packages which can be reused across the renderer, the main process and even outside in other non-electron focused services. This can lead to interesting problems though, such as making the code aware (without caring) where it is being executed. The <code>electron</code> package itself tends to abstract these things away whether the code is run on Windows&#x2F;MacOS&#x2F;Linux - however what about when you aren’t utilizing the target code <em>within</em> <code>Electron</code> anymore?</p>
<h2 id="isPackaged"><a href="#isPackaged" class="headerlink" title="isPackaged"></a>isPackaged</h2><p><code>Electron</code> gives us a method, <a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/latest/api/app#appispackaged-readonly">app.isPackaged</a> through it’s main API, however this isn’t useful to use unless we want to import <code>electron</code> into all of our code. Specifically it let’s us determine</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A boolean property that returns true if the app is packaged, false otherwise. For many apps, this property can be used to distinguish development and production environments.</span><br></pre></td></tr></table></figure>

<h2 id="Are-we-in-electron-or-not"><a href="#Are-we-in-electron-or-not" class="headerlink" title="Are we in electron or not?"></a>Are we in electron or not?</h2><p>There are a few <a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/latest/api/process">process</a> properties which are interesting in Electron. Specifically <a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/latest/api/process">process.resourcePath</a> and <a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/latest/api/process#processtype-readonly">process.type</a>. These are both extremely interesting to me, as often in code I need to get an asset file - though the path for such a file will change depending on if it is packaged, running as development <code>electron</code> or as <code>node-js</code>.</p>
<p>So, what we want to do, is check to see if <code>process.resourcesPath</code> returns anything - which it will not in <code>node.js</code>. If it does return something, we want to check if it returns something <em>with</em> <code>app.asar</code> inside it. This would mean (based on how we bundle things for distribution) that <code>electron</code> is bundled. This does mean, we will need to ignore expected <code>typescript</code> errors, as the type checking doesn’t expect <code>resourcePath</code> to ever exist on the <code>process</code> object. This lands us to this type of statement;</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @@ts-expect-error</span></span><br><span class="line"><span class="keyword">const</span> isPackaged = process?.<span class="property">resourcesPath</span></span><br><span class="line">  ? fs.<span class="title function_">pathExistsSync</span>(path.<span class="title function_">join</span>(process.<span class="property">resourcesPath</span>, <span class="string">&quot;app.asar&quot;</span>))</span><br><span class="line">  : <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<p>Now you can properly write functions to handle code differently based on whether the code is inside the <code>main</code> process, <code>renderer</code> or being run by some of your <code>node-js</code> code directly. Here is a prototype function I came up with which is semi-specific for my usecase, due to the local compile locations (<code>elect/</code> vs <code>elect/js</code> vs <code>src/cli/</code>);</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Handle getting the resource correctly based on if the electron</span></span><br><span class="line"><span class="comment"> * application is packages, main or renderer in dev mode.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">fileName</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getResourcePath</span>(<span class="params"><span class="attr">fileName</span>: <span class="built_in">string</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="comment">// @@ts-expect-error</span></span><br><span class="line">  <span class="keyword">const</span> isPackaged = process?.<span class="property">resourcesPath</span></span><br><span class="line">    ? fs.<span class="title function_">pathExistsSync</span>(path.<span class="title function_">join</span>(process.<span class="property">resourcesPath</span>, <span class="string">&quot;app.asar&quot;</span>))</span><br><span class="line">    : <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isPackaged) &#123;</span><br><span class="line">    <span class="comment">// @@ts-expect-error</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">      <span class="string">`isPackaged <span class="subst">$&#123;isPackaged&#125;</span> : <span class="subst">$&#123;path.join(process.resourcesPath, <span class="string">&quot;app.asar&quot;</span>)&#125;</span>`</span>,</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// @@ts-expect-error</span></span><br><span class="line">    <span class="keyword">return</span> path.<span class="title function_">join</span>(<span class="string">`<span class="subst">$&#123;process.resourcesPath&#125;</span>/app.asar/`</span>, fileName);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// renderer (type renderer) is run out of elect/</span></span><br><span class="line">  <span class="comment">// main (type browser) is run out of elect/js/</span></span><br><span class="line">  <span class="comment">// node (type undefined) is run out of src/cli/</span></span><br><span class="line">  <span class="comment">// @@ts-expect-error</span></span><br><span class="line">  <span class="keyword">const</span> isRenderer =</span><br><span class="line">    <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(process, <span class="string">&quot;type&quot;</span>) &amp;&amp;</span><br><span class="line">    process.<span class="property">type</span> === <span class="string">&quot;renderer&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> path.<span class="title function_">join</span>(</span><br><span class="line">    isRenderer ? <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../`</span> : <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../../`</span>,</span><br><span class="line">    fileName,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a target="_blank" rel="noopener" href="https://github.com/strazzere">Projects</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Electron-and-local-environments"><span class="toc-number">1.</span> <span class="toc-text">Electron and local environments</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#isPackaged"><span class="toc-number">1.1.</span> <span class="toc-text">isPackaged</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Are-we-in-electron-or-not"><span class="toc-number">1.2.</span> <span class="toc-text">Are we in electron or not?</span></a></li></ol></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&text=Electron code reuse, and other hackery"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&title=Electron code reuse, and other hackery"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&is_video=false&description=Electron code reuse, and other hackery"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Electron code reuse, and other hackery&body=Check out this article: https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&title=Electron code reuse, and other hackery"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&title=Electron code reuse, and other hackery"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&title=Electron code reuse, and other hackery"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&title=Electron code reuse, and other hackery"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&name=Electron code reuse, and other hackery&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://strazzere.com/2025/02/electron-code-reuse-and-other-hackery/&t=Electron code reuse, and other hackery"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2008-2025
    Tim Strazzere
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/strazzere">Projects</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
